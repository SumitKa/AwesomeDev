{% extends "mainapp/base/base.html" %}
{% load staticfiles %}
{% block title %}
    {{ person.name }} - mehr.
{% endblock %}
{% block css %}
    <link href='{% static "mainapp/css/libs/flickity.min.css" %}' rel="stylesheet" type="text/css"/>
    <link href='{% static "mainapp/css/layer_gallery.css" %}' rel="stylesheet" type="text/css"/>
{% endblock %}
{% block js %}
    <script src='{% static "mainapp/js/libs/flickity.pkgd.min.js" %}'></script>
    <script src='{% static "mainapp/js/layer_gallery.js" %}'></script>
    <script>
        var chapterLink = "{% url 'mainapp:chapterPage' person.id chapter.get_relative_id current_time %}";
    </script>
{% endblock %}
{% block content %}
{% if layer.ambient_music %}
<audio autoplay>
    <source src="{{ layer.ambient_music.url }}" type="audio/ogg">
    <source src="{{ layer.ambient_music.url }}" type="audio/mpeg">
    Your browser does not support the audio tag.
</audio>
{% endif %}
<div class="timeline">
    <progress id="chapterProgressbar" value="{{ chapter_progress }}" max="100"></progress>
</div>
<div class="box">
    <div>
        <a class="header" href="#">...</a>
    </div>
    <div class="content">
        <div class="carousel">
            {% for image in layer.galleryimage_set.all %}
            <img src="{% static image.image.url %}"/>
            {% endfor %}
        </div>
    </div>
    <div>
        <a class="mehr" href="#">mehr.</a>
    </div>
</div>
{% if chapter.get_additional_count > 0 %}
<div id="layer-container" class="layer-container">
    {% for layer in chapter.additionalcontent_set.all %}
    {# set custom attribute with html5 'data-' prefix #}
    <div class="layer" style="background-image: url('{{ layer.image.url }}');" data-layerlink="{% url 'mainapp:additionalContentPage' person.id chapter.get_relative_id layer.get_relative_id %}">
        <div class="layer-title">{{layer.name}}</div>
        <div class="layer-description">{{layer.description}}</div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% endblock %}