{% load staticfiles %}
{% load embed_video_tags %}

<ul>
    {% for chapter in person.chapter_set.all %}
    <li>
        <a href="{% url 'mainapp:chapterPage' person.id chapter.id %}">Chapter {{ chapter.index }}</a>
        ; vid: {{ chapter.video_url }}
    </li>
    {% endfor %}
</ul>
<h1>{{ person.name }}</h1>

{% with chapter=person.chapter_set.first %}
    currently playing: chapter {{ chapter }}.<br/>
    {% with 'mainapp/video/'|add:chapter.video_url as video_static %}
        <video width="320" height="240" controls>
            <source src="{% static video_static %}" type="video/mp4">
            <source src="{% static video_static %}" type="video/webm">
            Your browser does not support the video tag.
        </video>
        <br/><br/>
    {% endwith %}
{% endwith %}

{% for chapter in person.chapter_set.all %}
<li>
    {% with 'mainapp/video/'|add:chapter.video_url as image_static %}
        {% static image_static %}
    {% endwith %}
</li>
{% endfor %}

{% with next_person=person.get_next previous_person=person.get_previous %}
    {% if previous_person %}
        <a href="{% url 'mainapp:personPage' previous_person.id %}">previous</a> ({{ previous_person.name }})<br/>
    {% endif %}

    {% if next_person %}
        <a href="{% url 'mainapp:personPage' next_person.id %}">next</a> ({{ next_person.name }})
    {% endif %}
{% endwith %}
